{
  "max_attempts": {
    "description": "最大重试次数",
    "type": "int",
    "hint": "当LLM回复无效时，插件将尝试重新请求的最大次数。设置为0则禁用重试。",
    "default": 3
  },
  "retry_delay": {
    "description": "重试间隔（秒）",
    "type": "int",
    "hint": "每次重试之间的等待时间，单位为秒。",
    "default": 2
  },
  "error_keywords": {
    "description": "触发重试的错误关键词",
    "type": "text",
    "hint": "当LLM的回复中包含这些关键词时，将触发重试。请每行输入一个关键词，不区分大小写。",
    "default": "api 返回的内容为空\n请求失败\nAPI 返回的 completion 由于内容安全过滤被拒绝(非 AstrBot)\n调用失败\n处理失败"
  },
  "always_use_system_prompt": {
    "description": "强制使用Provider的人设覆盖上下文中的system消息",
    "type": "bool",
    "hint": "开启后，重试时会移除上下文中的所有system消息，并统一使用Provider的system_prompt，避免异常/污染人设。",
    "default": true
  },
  "retryable_status_codes": {
    "description": "允许重试的HTTP状态码(每行一个)",
    "type": "text",
    "hint": "当错误文本中包含这些状态码时，允许进入重试流程。支持 400/429/502/503/504 等。",
    "default": "400\n429\n502\n503\n504"
  },
  "non_retryable_status_codes": {
    "description": "禁止重试的HTTP状态码(每行一个)",
    "type": "text",
    "hint": "当错误文本中包含这些状态码时，将直接跳过重试。留空表示不限制。",
    "default": ""
  },
  "fallback_reply": {
    "description": "重试全部失败时的兜底回复",
    "type": "text",
    "hint": "当达到最大重试次数仍失败时，发送给用户的一段友好提示。留空则不发送消息。",
    "default": "抱歉，刚才遇到服务波动，我已自动为你重试多次仍未成功。请稍后再试或换个说法。"
  }
}
